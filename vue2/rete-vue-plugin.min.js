/*!
* rete-vue-plugin v2.0.4
* (c) 2024 Vitaliy Stoliarov
* Released under the MIT license.
* */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("rete"),require("vue"),require("rete-render-utils"),require("rete-area-plugin")):"function"==typeof define&&define.amd?define(["exports","rete","vue","rete-render-utils","rete-area-plugin"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).ReteVuePlugin={},t.Rete,t.Vue,t.ReteRenderUtils,t.ReteAreaPlugin)}(this,(function(t,e,n,r,o){"use strict";function i(t){if(!t)return;if("undefined"==typeof window)return;const e=document.createElement("style");return e.setAttribute("type","text/css"),e.innerHTML=t,document.head.appendChild(e),t}function a(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var s=a(n);function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach((function(e){h(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function l(){l=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function c(t,e,n,o){var i=e&&e.prototype instanceof f?e:f,a=Object.create(i.prototype),s=new S(o||[]);return r(a,"_invoke",{value:_(t,n,s)}),a}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var p={};function f(){}function h(){}function v(){}var m={};u(m,i,(function(){return this}));var b=Object.getPrototypeOf,y=b&&b(b(j([])));y&&y!==e&&n.call(y,i)&&(m=y);var g=v.prototype=f.prototype=Object.create(m);function w(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function o(r,i,a,s){var u=d(t[r],t,i);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==typeof l&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){o("next",t,a,s)}),(function(t){o("throw",t,a,s)})):e.resolve(l).then((function(t){c.value=t,a(c)}),(function(t){return o("throw",t,a,s)}))}s(u.arg)}var i;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){o(t,n,e,r)}))}return i=i?i.then(r,r):r()}})}function _(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return C()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var s=k(a,n);if(s){if(s===p)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=d(t,e,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function k(t,e){var n=e.method,r=t.iterator[n];if(void 0===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=void 0,k(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var o=d(r,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,p;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,p):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function j(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:C}}function C(){return{value:void 0,done:!0}}return h.prototype=v,r(g,"constructor",{value:v,configurable:!0}),r(v,"constructor",{value:h,configurable:!0}),h.displayName=u(v,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,u(t,s,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},w(x.prototype),u(x.prototype,a,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new x(c(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(g),u(g,s,"Generator"),u(g,i,(function(){return this})),u(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=j,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),O(n),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;O(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:j(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),p}},t}function d(t){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d(t)}function p(t,e,n,r,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,o)}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,_(r.key),r)}}function h(t,e,n){return(e=_(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function v(t){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},v(t)}function m(t,e){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},m(t,e)}function b(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=v(t);if(e){var o=v(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return b(t)}(this,n)}}function g(){return g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=v(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},g.apply(this,arguments)}function w(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function x(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return w(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?w(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function _(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}function k(){var t=new Map;return{get:function(e){return t.get(e)},mount:function(e,n,r,o){var i=function(t,e,n,r){var o=new s.default({props:["payload"],render:function(t){return t(e,{props:c(c({},this.payload),{},{seed:Math.random()}),ref:"child"})},mounted:function(){r()},updated:function(){r()}});o.payload=n;var i=document.createElement("div");return i&&t.appendChild(i),o.$mount(i||t),o}(e,n,r,o);return t.set(e,i),i},update:function(t,e){!function(t,e){t.payload=c(c({},t.payload),e),t.$refs.child.$forceUpdate()}(t,e)},unmount:function(e){var n=t.get(e);n&&(!function(t){t.$destroy(),t.$el.remove()}(n),t.delete(e))}}}var P=function(){var t=this,e=t._self._c;return t._self._setupProxy,e("svg",{attrs:{"data-testid":"connection"}},[e("path",{attrs:{d:t.path}})])},O=[];function S(t,e,n,r,o,i,a,s){var u,c="function"==typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=n,c._compiled=!0),r&&(c.functional=!0),i&&(c._scopeId="data-v-"+i),a?(u=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),o&&o.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},c._ssrRegister=u):o&&(u=s?function(){o.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:o),u)if(c.functional){c._injectStyles=u;var l=c.render;c.render=function(t,e){return u.call(e),l(t,e)}}else{var d=c.beforeCreate;c.beforeCreate=d?[].concat(d,u):[u]}return{exports:t,options:c}}P._withStripped=!0,i("/*! https://github.com/retejs/connection-plugin/commit/206ca0fd7fb82801ac45a0f7180ae05dff9ed901 */\nsvg[data-v-fee8858e] {\n  overflow: visible !important;\n  position: absolute;\n  pointer-events: none;\n  width: 9999px;\n  height: 9999px;\n}\nsvg[data-v-fee8858e] path[data-v-fee8858e] {\n  fill: none;\n  stroke-width: 5px;\n  stroke: steelblue;\n  pointer-events: auto;\n}");var j=S(n.defineComponent({props:["data","start","end","path"]}),P,O,!1,null,"fee8858e",null,null);j.options.__file="/home/runner/work/vue-plugin/vue-plugin/src/presets/classic/components/Connection.vue";var C=j.exports,E=function(){var t=this,e=t._self._c;return t._self._setupProxy,e(t.component,{tag:"component",attrs:{data:t.data,start:t.startPosition,end:t.endPosition,path:t.observedPath}})},L=[];E._withStripped=!0;var $=S(n.defineComponent({props:["component","data","start","end","path"],data:()=>({observedStart:{x:0,y:0},observedEnd:{x:0,y:0},observedPath:"",onDestroy:null}),computed:{startPosition(){return this.start&&"x"in this.start?this.start:this.observedStart},endPosition(){return this.end&&"x"in this.end?this.end:this.observedEnd}},watch:{startPosition(){this.fetchPath()},endPosition(){this.fetchPath()}},methods:{async fetchPath(){this.startPosition&&this.endPosition&&(this.observedPath=await this.path(this.startPosition,this.endPosition))}},created(){const t="function"==typeof this.start&&this.start((t=>{this.observedStart=t})),e="function"==typeof this.end&&this.end((t=>{this.observedEnd=t}));this.onDestroy=()=>{t&&t(),e&&e()}},destroyed(){this.onDestroy&&this.onDestroy()}}),E,L,!1,null,null,null,null);$.options.__file="/home/runner/work/vue-plugin/vue-plugin/src/presets/classic/components/ConnectionWrapper.vue";var z=$.exports,R=function(){var t=this,e=t._self._c;return t._self._setupProxy,e("input",{attrs:{type:t.data.type,readonly:t.data.readonly},domProps:{value:t.data.value},on:{input:t.change,pointerdown:function(t){t.stopPropagation()}}})},N=[];R._withStripped=!0,i("input[data-v-a4adbbb3] {\n  width: 100%;\n  border-radius: 30px;\n  background-color: white;\n  padding: 2px 6px;\n  border: 1px solid #999;\n  font-size: 110%;\n  box-sizing: border-box;\n}");var D=S(n.defineComponent({props:["data"],methods:{change(t){const e="number"===this.data.type?+t.target.value:t.target.value;this.data.setValue(e)}}}),R,N,!1,null,"a4adbbb3",null,null);D.options.__file="/home/runner/work/vue-plugin/vue-plugin/src/presets/classic/components/Control.vue";var T=D.exports,I=function(){var t=this,e=t._self._c;return t._self._setupProxy,e("div",t._b({ref:"element"},"div",t.$props,!1))},M=[];I._withStripped=!0;var B=S(n.defineComponent({props:["data","emit"],mounted(){this.emit({type:"render",data:{...this.data,element:this.$refs.element}})},beforeDestroy(){this.emit({type:"unmount",data:{element:this.$refs.element}})},beforeUnmount(){this.emit({type:"unmount",data:{element:this.$refs.element}})}}),I,M,!1,null,null,null,null);B.options.__file="/home/runner/work/vue-plugin/vue-plugin/src/Ref.vue";var A=B.exports;function F(t){return t.sort(((t,e)=>(t[1]&&t[1].index||0)-(e[1]&&e[1].index||0))),t}var W=n.defineComponent({props:["data","emit","seed"],methods:{nodeStyles(){return{width:Number.isFinite(this.data.width)?`${this.data.width}px`:"",height:Number.isFinite(this.data.height)?`${this.data.height}px`:""}},inputs(){return F(Object.entries(this.data.inputs))},controls(){return F(Object.entries(this.data.controls))},outputs(){return F(Object.entries(this.data.outputs))}},components:{Ref:A}}),V=function(){var t=this,e=t._self._c;return e("div",{staticClass:"node",class:{selected:t.data.selected},style:t.nodeStyles(),attrs:{"data-testid":"node"}},[e("div",{staticClass:"title",attrs:{"data-testid":"title"}},[t._v(t._s(t.data.label))]),t._l(t.outputs(),(function([n,r]){return e("div",{key:"output"+n+t.seed,staticClass:"output",attrs:{"data-testid":"output-"+n}},[e("div",{staticClass:"output-title",attrs:{"data-testid":"output-title"}},[t._v(t._s(r.label))]),e("Ref",{staticClass:"output-socket",attrs:{data:{type:"socket",side:"output",key:n,nodeId:t.data.id,payload:r.socket},emit:t.emit,"data-testid":"output-socket"}})],1)})),t._l(t.controls(),(function([n,r]){return e("Ref",{key:"control"+n+t.seed,staticClass:"control",attrs:{"data-testid":"control-"+n,emit:t.emit,data:{type:"control",payload:r}}})})),t._l(t.inputs(),(function([n,r]){return e("div",{key:"input"+n+t.seed,staticClass:"input",attrs:{"data-testid":"input-"+n}},[e("Ref",{staticClass:"input-socket",attrs:{data:{type:"socket",side:"input",key:n,nodeId:t.data.id,payload:r.socket},emit:t.emit,"data-testid":"input-socket"}}),e("div",{directives:[{name:"show",rawName:"v-show",value:!r.control||!r.showControl,expression:"!input.control || !input.showControl"}],staticClass:"input-title",attrs:{"data-testid":"input-title"}},[t._v(t._s(r.label))]),e("Ref",{directives:[{name:"show",rawName:"v-show",value:r.control&&r.showControl,expression:"input.control && input.showControl"}],staticClass:"input-control",attrs:{emit:t.emit,data:{type:"control",payload:r.control},"data-testid":"input-control"}})],1)}))],2)},G=[];V._withStripped=!0,i(".node[data-v-cc6bc301] {\n  background: rgba(110, 136, 255, 0.8);\n  border: 2px solid #4e58bf;\n  border-radius: 10px;\n  cursor: pointer;\n  box-sizing: border-box;\n  width: 180px;\n  height: auto;\n  padding-bottom: 6px;\n  position: relative;\n  user-select: none;\n  line-height: initial;\n  font-family: Arial;\n}\n.node[data-v-cc6bc301][data-v-cc6bc301]:hover {\n  background: rgba(130, 153, 255, 0.8);\n}\n.node[data-v-cc6bc301].selected[data-v-cc6bc301] {\n  background: #ffd92c;\n  border-color: #e3c000;\n}\n.node[data-v-cc6bc301] .title[data-v-cc6bc301] {\n  color: white;\n  font-family: sans-serif;\n  font-size: 18px;\n  padding: 8px;\n}\n.node[data-v-cc6bc301] .output[data-v-cc6bc301] {\n  text-align: right;\n}\n.node[data-v-cc6bc301] .input[data-v-cc6bc301] {\n  text-align: left;\n}\n.node[data-v-cc6bc301] .output-socket[data-v-cc6bc301] {\n  text-align: right;\n  margin-right: -18px;\n  display: inline-block;\n}\n.node[data-v-cc6bc301] .input-socket[data-v-cc6bc301] {\n  text-align: left;\n  margin-left: -18px;\n  display: inline-block;\n}\n.node[data-v-cc6bc301] .input-title[data-v-cc6bc301],\n.node[data-v-cc6bc301] .output-title[data-v-cc6bc301] {\n  vertical-align: middle;\n  color: white;\n  display: inline-block;\n  font-family: sans-serif;\n  font-size: 14px;\n  margin: 6px;\n  line-height: 24px;\n}\n.node[data-v-cc6bc301] .input-control[data-v-cc6bc301] {\n  z-index: 1;\n  width: calc(100% - 36px);\n  vertical-align: middle;\n  display: inline-block;\n}\n.node[data-v-cc6bc301] .control[data-v-cc6bc301] {\n  padding: 6px 18px;\n}");var H=S(W,V,G,!1,null,"cc6bc301",null,null);H.options.__file="/home/runner/work/vue-plugin/vue-plugin/src/presets/classic/components/Node.vue";var U=H.exports,q=function(){return(0,this._self._c)("div",{staticClass:"socket",attrs:{title:this.data.name}})},X=[];q._withStripped=!0,i(".socket[data-v-4a0a4b7f] {\n  display: inline-block;\n  cursor: pointer;\n  border: 1px solid white;\n  border-radius: 12px;\n  width: 24px;\n  height: 24px;\n  margin: 6px;\n  vertical-align: middle;\n  background: #96b38a;\n  z-index: 2;\n  box-sizing: border-box;\n}\n.socket[data-v-4a0a4b7f][data-v-4a0a4b7f]:hover {\n  border-width: 4px;\n}\n.socket[data-v-4a0a4b7f].multiple[data-v-4a0a4b7f] {\n  border-color: yellow;\n}\n.socket[data-v-4a0a4b7f].output[data-v-4a0a4b7f] {\n  margin-right: -12px;\n}\n.socket[data-v-4a0a4b7f].input[data-v-4a0a4b7f] {\n  margin-left: -12px;\n}");var Y=S({props:["data"]},q,X,!1,null,"4a0a4b7f",null,null);Y.options.__file="/home/runner/work/vue-plugin/vue-plugin/src/presets/classic/components/Socket.vue";var J=Y.exports;var K=Object.freeze({__proto__:null,setup:function(t){var n=void 0===(null==t?void 0:t.socketPositionWatcher)?r.getDOMSocketPosition():null==t?void 0:t.socketPositionWatcher,o=(null==t?void 0:t.customize)||{},i=o.node,a=o.connection,s=o.socket,u=o.control;return{attach:function(t){n.attach(t)},update:function(t,e){var n=t.data.payload,r=e.parentScope();if(!r)throw new Error("parent");var o=r.emit.bind(r);if("node"===t.data.type)return{data:n,emit:o};if("connection"===t.data.type){var i=t.data,a=i.start,s=i.end;return c(c({data:n},a?{start:a}:{}),s?{end:s}:{})}return{data:n}},render:function(t,o){var c,d,f=o.parentScope(),h=f.emit.bind(f);if("node"===t.data.type){var v=i?i(t.data):U;return v&&{component:v,props:{data:t.data.payload,emit:h}}}if("connection"===t.data.type){var m=a?a(t.data):C,b=t.data.payload,y=b.source,g=b.target,w=b.sourceOutput,x=b.targetInput;return m&&{component:z,props:{data:t.data.payload,component:m,start:t.data.start||function(t){return n.listen(y,"output",w,t)},end:t.data.end||function(t){return n.listen(g,"input",x,t)},path:(c=l().mark((function t(e,n){var i,a,s,u,c;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.emit({type:"connectionpath",data:{payload:b,points:[e,n]}});case 2:if(i=t.sent){t.next=5;break}return t.abrupt("return","");case 5:if(a=i.data,s=a.path,u=a.points,c=.3,s||2===u.length){t.next=9;break}throw new Error("cannot render connection with a custom number of points");case 9:if(s){t.next=11;break}return t.abrupt("return",b.isLoop?r.loopConnectionPath(u,c,120):r.classicConnectionPath(u,c));case 11:return t.abrupt("return",s);case 12:case"end":return t.stop()}}),t)})),d=function(){var t=this,e=arguments;return new Promise((function(n,r){var o=c.apply(t,e);function i(t){p(o,n,r,i,a,"next",t)}function a(t){p(o,n,r,i,a,"throw",t)}i(void 0)}))},function(t,e){return d.apply(this,arguments)})}}}if("socket"===t.data.type){var _=t.data.payload;return{component:s?s(t.data):J,props:{data:_}}}if("control"===t.data.type){var k=t.data.payload;if(u){var P=u(t.data);return P&&{component:P,props:{data:k}}}return t.data.payload instanceof e.ClassicPreset.InputControl?{component:T,props:{data:k}}:null}}}},Connection:C,Control:T,Node:U,Socket:J}),Q=function(){return(0,this._self._c)("div",{staticClass:"block"},[this._t("default")],2)},Z=[];Q._withStripped=!0,i(".block[data-v-e9c17765] {\n  color: #fff;\n  padding: 4px;\n  border-bottom: 1px solid rgba(69, 103, 255, 0.8);\n  background-color: rgba(110, 136, 255, 0.8);\n  cursor: pointer;\n  box-sizing: border-box;\n  width: 100%;\n  position: relative;\n}\n.block[data-v-e9c17765][data-v-e9c17765]:first-child {\n  border-top-left-radius: 5px;\n  border-top-right-radius: 5px;\n}\n.block[data-v-e9c17765][data-v-e9c17765]:last-child {\n  border-bottom-left-radius: 5px;\n  border-bottom-right-radius: 5px;\n}\n.block[data-v-e9c17765][data-v-e9c17765]:hover {\n  background-color: rgba(130, 153, 255, 0.8);\n}");var tt=S({},Q,Z,!1,null,"e9c17765",null,null);tt.options.__file="/home/runner/work/vue-plugin/vue-plugin/src/presets/context-menu/components/Block.vue";var et=tt.exports,nt=function(){var t=this,e=t._self._c;return t._self._setupProxy,e("input",{staticClass:"search",attrs:{"data-testid":"context-menu-search-input"},domProps:{value:t.text},on:{input:function(e){return t.$emit("change",e.target.value)}}})},rt=[];nt._withStripped=!0,i(".search[data-v-3253b3e6] {\n  color: white;\n  padding: 1px 8px;\n  border: 1px solid white;\n  border-radius: 10px;\n  font-size: 16px;\n  font-family: serif;\n  width: 100%;\n  box-sizing: border-box;\n  background: transparent;\n}");var ot=S(n.defineComponent({props:["text"]}),nt,rt,!1,null,"3253b3e6",null,null);ot.options.__file="/home/runner/work/vue-plugin/vue-plugin/src/presets/context-menu/components/Search.vue";var it=ot.exports;function at(t,e){return{timeout:null,cancel:function(){this.timeout&&(window.clearTimeout(this.timeout),this.timeout=null)},call:function(){this.timeout=window.setTimeout((function(){e()}),t)}}}var st=function(){var t=this,e=t._self._c;return e("Block",{staticClass:"block",class:{hasSubitems:t.subitems},attrs:{"data-testid":"context-menu-item"}},[e("div",{staticClass:"content",on:{click:function(e){e.stopPropagation(),t.$emit("select",e),t.$emit("hide")},wheel:function(t){t.stopPropagation()},pointerover:function(e){t.hide.cancel(),t.visibleSubitems=!0},pointerleave:function(e){return t.hide.call()},pointerdown:function(t){t.stopPropagation()}}},[t._t("default"),t.subitems&&t.visibleSubitems?e("div",{staticClass:"subitems"},t._l(t.subitems,(function(n){return e("Item",{key:n.key,attrs:{delay:t.delay,subitems:n.subitems},on:{select:function(t){return n.handler(t)},hide:function(e){return t.$emit("hide")}}},[t._v(t._s(n.label))])})),1):t._e()],2)])},ut=[];st._withStripped=!0,i('@charset "UTF-8";\n.block[data-v-fc3b2bca] {\n  padding: 0;\n}\n\n.content[data-v-fc3b2bca] {\n  padding: 4px;\n}\n\n.hasSubitems[data-v-fc3b2bca][data-v-fc3b2bca]:after {\n  content: "►";\n  position: absolute;\n  opacity: 0.6;\n  right: 5px;\n  top: 5px;\n}\n\n.subitems[data-v-fc3b2bca] {\n  position: absolute;\n  top: 0;\n  left: 100%;\n  width: 120px;\n}');var ct=S({name:"Item",props:["subitems","delay"],data(){return{visibleSubitems:!1,hide:at(this.delay,this.hideSubitems)}},methods:{hideSubitems(){this.visibleSubitems=!1}},components:{Block:et}},st,ut,!1,null,"fc3b2bca",null,null);ct.options.__file="/home/runner/work/vue-plugin/vue-plugin/src/presets/context-menu/components/Item.vue";var lt=ct.exports,dt=function(){var t=this,e=t._self._c;return t._self._setupProxy,e("div",{staticClass:"menu",attrs:{"data-testid":"context-menu","rete-context-menu":""},on:{mouseover:function(e){return t.hide.cancel()},mouseleave:function(e){return t.hide.call()}}},[t.searchBar?e("Block",[e("Search",{attrs:{text:t.filter},on:{change:function(e){t.filter=e}}})],1):t._e(),t._l(t.getItems(),(function(n){return e("Item",{key:n.key,attrs:{delay:t.delay,subitems:n.subitems},on:{select:function(t){return n.handler(t)},hide:function(e){return t.onHide()}}},[t._v(t._s(n.label))])}))],2)},pt=[];dt._withStripped=!0,i(".menu[data-v-2571168d] {\n  padding: 10px;\n  width: 120px;\n  margin-top: -20px;\n  margin-left: -60px;\n}");var ft=S(n.defineComponent({props:["items","delay","searchBar","onHide","seed"],data(){return{filter:"",hide:at(this.delay,this.onHide)}},methods:{getItems(){const t=new RegExp(this.filter,"i");return this.items.filter((e=>e.label.match(t)))}},unmounted(){this.hide&&this.hide.cancel()},components:{Block:et,Search:it,Item:lt}}),dt,pt,!1,null,"2571168d",null,null);ft.options.__file="/home/runner/work/vue-plugin/vue-plugin/src/presets/context-menu/components/Menu.vue";var ht=ft.exports;var vt=Object.freeze({__proto__:null,setup:function(t){var e=void 0===(null==t?void 0:t.delay)?1e3:t.delay;return{update:function(t){if("contextmenu"===t.data.type)return{items:t.data.items,delay:e,searchBar:t.data.searchBar,onHide:t.data.onHide}},render:function(t){if("contextmenu"===t.data.type)return{component:ht,props:{items:t.data.items,delay:e,searchBar:t.data.searchBar,onHide:t.data.onHide}}}}}});function mt(t){return"".concat(t,"px")}var bt=function(){return(0,this._self._c)("div",{staticClass:"mini-node",style:this.styles,attrs:{"data-testid":"minimap-node"}})},yt=[];bt._withStripped=!0,i(".mini-node[data-v-2d96711d] {\n  position: absolute;\n  background: rgba(110, 136, 255, 0.8);\n  border: 1px solid rgba(192, 206, 212, 0.6);\n}");var gt=S({props:["left","top","width","height"],computed:{styles(){return{left:mt(this.left),top:mt(this.top),width:mt(this.width),height:mt(this.height)}}}},bt,yt,!1,null,"2d96711d",null,null);gt.options.__file="/home/runner/work/vue-plugin/vue-plugin/src/presets/minimap/MiniNode.vue";var wt=gt.exports;function xt(t,e){return{start:function(n){var r=c({},e(n));function o(n){var o=c({},e(n)),i=o.x-r.x,a=o.y-r.y;r=o,t(i,a)}function i(){window.removeEventListener("pointermove",o),window.removeEventListener("pointerup",i),window.removeEventListener("pointercancel",i)}window.addEventListener("pointermove",o),window.addEventListener("pointerup",i),window.addEventListener("pointercancel",i)}}}var _t=function(){var t=this;return(0,t._self._c)("div",{staticClass:"mini-viewport",style:t.styles,attrs:{"data-testid":"minimap-viewport"},on:{pointerdown:function(e){return e.stopPropagation(),t.drag.start(e)}}})},kt=[];_t._withStripped=!0,i(".mini-viewport[data-v-ed5fcf61] {\n  position: absolute;\n  background: rgba(255, 251, 128, 0.32);\n  border: 1px solid #ffe52b;\n}");var Pt=S({props:["left","top","width","height","containerWidth","translate"],data(){return{drag:xt(this.onDrag,(t=>({x:t.pageX,y:t.pageY})))}},methods:{scale(t){return t*this.containerWidth},invert(t){return t/this.containerWidth},onDrag(t,e){this.translate(this.invert(-t),this.invert(-e))}},computed:{styles(){return{left:mt(this.scale(this.left)),top:mt(this.scale(this.top)),width:mt(this.scale(this.width)),height:mt(this.scale(this.height))}}}},_t,kt,!1,null,"ed5fcf61",null,null);Pt.options.__file="/home/runner/work/vue-plugin/vue-plugin/src/presets/minimap/MiniViewport.vue";var Ot=Pt.exports,St=function(){var t=this,e=t._self._c;return e("div",{ref:"container",staticClass:"minimap",style:{width:t.px(t.size*t.ratio),height:t.px(t.size)},attrs:{"data-testid":"minimap"},on:{pointerdown:function(t){t.stopPropagation(),t.preventDefault()},dblclick:function(e){return e.stopPropagation(),e.preventDefault(),t.dblclick(e)}}},[t._l(t.nodes,(function(n,r){return e("MiniNode",{key:[r,n.left].join("_"),attrs:{left:t.scale(n.left),top:t.scale(n.top),width:t.scale(n.width),height:t.scale(n.height)}})})),e("MiniViewport",{attrs:{left:t.viewport.left,top:t.viewport.top,width:t.viewport.width,height:t.viewport.height,containerWidth:t.$refs.container&&t.$refs.container.clientWidth,translate:t.translate}})],2)},jt=[];St._withStripped=!0,i(".minimap[data-v-403730b0] {\n  position: absolute;\n  right: 24px;\n  bottom: 24px;\n  background: rgba(229, 234, 239, 0.65);\n  padding: 20px;\n  overflow: hidden;\n  border: 1px solid #b1b7ff;\n  border-radius: 8px;\n  box-sizing: border-box;\n}");var Ct=S({props:{size:Number,ratio:Number,nodes:Array,viewport:Object,translate:Function,point:Function,seed:Number},methods:{dblclick(t){if(!this.$refs.container)return;const e=this.$refs.container.getBoundingClientRect(),n=(t.clientX-e.left)/(this.size*this.ratio),r=(t.clientY-e.top)/(this.size*this.ratio);this.point(n,r)},px:mt,scale(t){return this.$refs.container?t*this.$refs.container.clientWidth:0}},components:{MiniNode:wt,MiniViewport:Ot}},St,jt,!1,null,"403730b0",null,null);Ct.options.__file="/home/runner/work/vue-plugin/vue-plugin/src/presets/minimap/Minimap.vue";var Et=Ct.exports;var Lt=Object.freeze({__proto__:null,setup:function(t){return{update:function(e){if("minimap"===e.data.type)return{nodes:e.data.nodes,size:(null==t?void 0:t.size)||200,ratio:e.data.ratio,viewport:e.data.viewport,translate:e.data.translate,point:e.data.point}},render:function(e){if("minimap"===e.data.type)return{component:Et,props:{nodes:e.data.nodes,size:(null==t?void 0:t.size)||200,ratio:e.data.ratio,viewport:e.data.viewport,translate:e.data.translate,point:e.data.point}}}}}}),$t=function(){var t=this;return(0,t._self._c)("div",{staticClass:"pin",class:{selected:t.selected},style:t.style,attrs:{"data-testid":"pin"},on:{pointerdown:function(e){e.stopPropagation(),e.preventDefault(),t.drag.start(e),t.$emit("down")},contextmenu:function(e){return e.stopPropagation(),e.preventDefault(),t.$emit("menu")}}})},zt=[];$t._withStripped=!0,i(".pin[data-v-42b064e9] {\n  width: 20px;\n  height: 20px;\n  box-sizing: border-box;\n  background: steelblue;\n  border: 2px solid white;\n  border-radius: 20px;\n}\n.pin[data-v-42b064e9].selected[data-v-42b064e9] {\n  background: #ffd92c;\n}");var Rt=S({props:["position","selected","getPointer"],data(){return{drag:xt(this.onDrag,this.getPointer)}},computed:{style(){const{x:t,y:e}=this.position;return{position:"absolute",top:e-10+"px",left:t-10+"px"}}},methods:{onDrag(t,e){this.$emit("translate",{dx:t,dy:e})}}},$t,zt,!1,null,"42b064e9",null,null);Rt.options.__file="/home/runner/work/vue-plugin/vue-plugin/src/presets/reroute/Pin.vue";var Nt=Rt.exports,Dt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"pins"},t._l(t.pins,(function(n){return e("Pin",{key:n.id,attrs:{position:n.position,selected:n.selected,getPointer:t.getPointer},on:{menu:function(e){return t.menu(n.id)},translate:function(e){return t.translate(n.id,e.dx,e.dy)},down:function(e){return t.down(n.id)}}})})),1)},Tt=[];Dt._withStripped=!0;var It=S({props:["pins","menu","translate","down","seed","getPointer"],components:{Pin:Nt}},Dt,Tt,!1,null,null,null,null);It.options.__file="/home/runner/work/vue-plugin/vue-plugin/src/presets/reroute/Pins.vue";var Mt=It.exports;var Bt=Object.freeze({__proto__:null,setup:function(t){var e=function(){return{menu:(null==t?void 0:t.contextMenu)||function(){return null},translate:(null==t?void 0:t.translate)||function(){return null},down:(null==t?void 0:t.pointerdown)||function(){return null}}};return{update:function(t){if("reroute-pins"===t.data.type)return c(c({},e()),{},{pins:t.data.data.pins})},render:function(t,n){if("reroute-pins"===t.data.type){var r=n.parentScope(o.BaseAreaPlugin);return{component:Mt,props:c(c({},e()),{},{getPointer:function(){return r.area.pointer},pins:t.data.data.pins})}}}}}}),At=Object.freeze({__proto__:null,classic:K,contextMenu:vt,minimap:Lt,reroute:Bt}),Ft=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&m(t,e)}(i,t);var e,n,r,o=y(i);function i(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),h(b(t=o.call(this,"vue-render")),"presets",[]),h(b(t),"owners",new WeakMap),t.renderer=k(),t.addPipe((function(e){if(!e||"object"!==d(e)||!("type"in e))return e;if("unmount"===e.type)t.unmount(e.data.element);else if("render"===e.type){if("filled"in e.data&&e.data.filled)return e;if(t.mount(e.data.element,e))return c(c({},e),{},{data:c(c({},e.data),{},{filled:!0})})}return e})),t}return e=i,(n=[{key:"setParent",value:function(t){var e=this;g(v(i.prototype),"setParent",this).call(this,t),this.presets.forEach((function(t){t.attach&&t.attach(e)}))}},{key:"unmount",value:function(t){this.owners.delete(t),this.renderer.unmount(t)}},{key:"mount",value:function(t,e){var n=this,r=this.renderer.get(t),o=this.parentScope();if(r)return this.presets.forEach((function(o){if(n.owners.get(t)===o){var i=o.update(e,n);i&&n.renderer.update(r,i)}})),!0;var i,a=x(this.presets);try{for(a.s();!(i=a.n()).done;){var s=i.value,u=s.render(e,this);if(u)return this.renderer.mount(t,u.component,u.props,(function(){return null==o?void 0:o.emit({type:"rendered",data:e.data})})),this.owners.set(t,s),!0}}catch(t){a.e(t)}finally{a.f()}}},{key:"addPreset",value:function(t){var e=t;e.attach&&e.attach(this),this.presets.push(e)}}])&&f(e.prototype,n),r&&f(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(e.Scope);t.Presets=At,t.Ref=A,t.VuePlugin=Ft,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=rete-vue-plugin.min.js.map
