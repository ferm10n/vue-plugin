{"version":3,"file":"rete-vue-plugin.common.js","sources":["../../src/vuecompat/vue2.ts","../../src/renderer.ts","../../src/presets/classic/components/Connection.vue","../../src/presets/classic/components/ConnectionWrapper.vue","../../src/presets/classic/components/Control.vue","../../src/Ref.vue","../../src/presets/classic/components/Node.vue","../../src/presets/classic/components/Socket.vue","../../src/presets/classic/index.ts","../../src/presets/context-menu/components/Search.vue","../../src/presets/context-menu/utils/debounce.ts","../../src/presets/context-menu/components/Item.vue","../../src/presets/context-menu/components/Menu.vue","../../src/presets/context-menu/index.ts","../../src/presets/minimap/utils.ts","../../src/presets/minimap/MiniNode.vue","../../src/shared/drag.ts","../../src/presets/minimap/MiniViewport.vue","../../src/presets/minimap/Minimap.vue","../../src/presets/minimap/index.ts","../../src/presets/reroute/Pin.vue","../../src/presets/reroute/Pins.vue","../../src/presets/reroute/index.ts","../../src/presets/index.ts","../../src/index.ts"],"sourcesContent":["import Vue from 'vue'\n\nexport function create(element: any, component: any, payload: any, onRendered: any) {\n  const app = new Vue({\n    props: ['payload'],\n    render(h) {\n      return h(component, { props: { ...this.payload, seed: Math.random() }, ref: 'child' })\n    },\n    mounted() {\n      onRendered()\n    },\n    updated() {\n      onRendered()\n    }\n  })\n\n  app.payload = payload\n\n  const container = document.createElement('div')\n\n  if (container) {\n    element.appendChild(container)\n  }\n\n  app.$mount(container || element)\n\n  return app\n}\n\nexport function update(app: any, payload: any) {\n  app.payload = { ...app.payload, ...payload }\n\n  app.$refs.child.$forceUpdate()\n}\n\nexport function destroy(app: any) {\n  app.$destroy()\n  app.$el.remove()\n}\n","// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-ignore\nimport { create, destroy, update } from 'process.env.VUECOMPAT'\n\nexport type Renderer<I> = {\n  get(element: Element): I | undefined\n  mount<P>(element: Element, vueComponent: any, payload: P, onRendered: any): I\n  update<P>(app: I, payload: P): void\n  unmount(element: Element): void\n}\n\nexport function getRenderer<I>(): Renderer<I> {\n  const instances = new Map<Element, I>()\n\n  return {\n    get(element) {\n      return instances.get(element)\n    },\n    mount(element, vueComponent, payload, onRendered) {\n      const app = create(element, vueComponent, payload, onRendered)\n\n      instances.set(element, app)\n\n      return app\n    },\n    update(app, payload) {\n      update(app, payload)\n    },\n    unmount(element) {\n      const app = instances.get(element)\n\n      if (app) {\n        destroy(app)\n        instances.delete(element)\n      }\n    }\n  }\n}\n","<template lang=\"pug\">\nsvg(data-testid=\"connection\")\n  path(:d=\"path\")\n</template>\n\n<script>\nimport { defineComponent } from 'vue'\n\nexport default defineComponent({\n  props: ['data', 'start', 'end', 'path']\n})\n</script>\n\n<style lang=\"scss\" scoped>\n/*! https://github.com/retejs/connection-plugin/commit/206ca0fd7fb82801ac45a0f7180ae05dff9ed901 */\nsvg {\n  overflow: visible !important;\n  position: absolute;\n  pointer-events: none;\n  width: 9999px;\n  height: 9999px;\n  path {\n    fill: none;\n    stroke-width: 5px;\n    stroke: steelblue;\n    pointer-events: auto;\n  }\n}\n</style>\n","<template lang=\"pug\">\ncomponent(:is=\"component\" :data=\"data\" :start=\"startPosition\" :end=\"endPosition\", :path=\"observedPath\")\n</template>\n\n<script>\nimport { defineComponent } from 'vue';\n\nexport default defineComponent({\n  props: ['component', 'data', 'start', 'end', 'path'],\n  data() {\n    return {\n      observedStart: { x: 0, y: 0 },\n      observedEnd: { x: 0, y: 0 },\n      observedPath: '',\n      onDestroy: null\n    }\n  },\n  computed: {\n    startPosition() {\n      if (this.start && 'x' in this.start) return this.start\n      return this.observedStart\n    },\n    endPosition() {\n      if (this.end && 'x' in this.end) return this.end\n      return this.observedEnd\n    }\n  },\n  watch: {\n    startPosition() { this.fetchPath() },\n    endPosition() { this.fetchPath() }\n  },\n  methods: {\n    async fetchPath() {\n      if (this.startPosition && this.endPosition) {\n        this.observedPath = await this.path(this.startPosition, this.endPosition)\n      }\n    }\n  },\n  created() {\n    const unwatch1 = typeof this.start === 'function' && this.start(pos => {\n      this.observedStart = pos\n    })\n    const unwatch2 = typeof this.end === 'function' && this.end(pos => {\n      this.observedEnd = pos\n    })\n\n    this.onDestroy = () => {\n      unwatch1 && unwatch1()\n      unwatch2 && unwatch2()\n    }\n  },\n  destroyed() {\n    if (this.onDestroy) this.onDestroy()\n  }\n})\n</script>\n","<template lang=\"pug\">\ninput(\n  :type=\"data.type\"\n  :value=\"data.value\"\n  :readonly=\"data.readonly\"\n  @input=\"change\"\n  @pointerdown.stop=\"\"\n)\n</template>\n\n<script>\nimport { defineComponent } from 'vue'\n\nexport default defineComponent({\n  props: ['data'],\n  methods: {\n    change(e) {\n      const val = this.data.type === 'number'\n        ? +e.target.value\n        : e.target.value\n\n      this.data.setValue(val)\n    }\n  }\n})\n</script>\n\n<style lang=\"scss\" scoped>\n@use \"sass:math\";\n@import \"../vars\";\n\ninput {\n  width: 100%;\n  border-radius: 30px;\n  background-color: white;\n  padding: 2px 6px;\n  border: 1px solid #999;\n  font-size: 110%;\n  box-sizing: border-box;\n}\n</style>\n","<template lang=\"pug\">\ndiv(v-bind=\"$props\" ref=\"element\")\n</template>\n\n<script>\nimport { defineComponent } from 'vue'\n\nexport default defineComponent({\n  props: ['data', 'emit'],\n  mounted() {\n    this.emit({ type: 'render', data: { ...this.data, element: this.$refs.element } })\n  },\n  beforeDestroy() {\n    this.emit({ type: 'unmount', data: { element: this.$refs.element } })\n  },\n  beforeUnmount() {\n    this.emit({ type: 'unmount', data: { element: this.$refs.element } })\n  }\n})\n</script>\n","<template lang=\"pug\">\n.node(:class=\"{ selected: data.selected }\" :style=\"nodeStyles()\" data-testid=\"node\")\n  .title(data-testid=\"title\") {{data.label}}\n\n  // Outputs\n  .output(v-for='[key, output] in outputs()' :key=\"'output' + key + seed\" :data-testid=\"'output-'+key\")\n    .output-title(data-testid=\"output-title\") {{output.label}}\n    Ref.output-socket(\n      :data=\"{ type: 'socket', side: 'output', key: key, nodeId: data.id, payload: output.socket }\"\n      :emit=\"emit\"\n      data-testid=\"output-socket\")\n\n  // Controls\n  Ref.control(\n    v-for='[key, control] in controls()',\n    :key=\"'control' + key + seed\",\n    :data-testid=\"'control-'+key\"\n    :emit=\"emit\"\n    :data=\"{ type: 'control', payload: control }\"\n  )\n\n  // Inputs\n  .input(v-for='[key, input] in inputs()' :key=\"'input' + key + seed\" :data-testid=\"'input-'+key\")\n    Ref.input-socket(\n      :data=\"{ type: 'socket', side: 'input', key: key, nodeId: data.id, payload: input.socket }\"\n      :emit=\"emit\"\n      data-testid=\"input-socket\"\n    )\n    .input-title(v-show='!input.control || !input.showControl' data-testid=\"input-title\") {{input.label}}\n    Ref.input-control(\n      v-show='input.control && input.showControl'\n      :emit=\"emit\"\n      :data=\"{ type: 'control', payload: input.control }\"\n      data-testid=\"input-control\"\n    )\n</template>\n\n\n<script lang=\"js\">\nimport { defineComponent } from 'vue'\nimport Ref from '../../../Ref.vue'\n\nfunction sortByIndex(entries) {\n  entries.sort((a, b) => {\n    const ai = a[1] && a[1].index || 0\n    const bi = b[1] && b[1].index || 0\n\n    return ai - bi\n  })\n  return entries\n}\n\nexport default defineComponent({\n  props: ['data', 'emit', 'seed'],\n  methods: {\n    nodeStyles() {\n      return {\n        width: Number.isFinite(this.data.width) ? `${this.data.width}px` : '',\n        height: Number.isFinite(this.data.height) ? `${this.data.height}px` : ''\n      }\n    },\n    inputs() {\n      return sortByIndex(Object.entries(this.data.inputs))\n    },\n    controls() {\n      return sortByIndex(Object.entries(this.data.controls))\n    },\n    outputs() {\n      return sortByIndex(Object.entries(this.data.outputs))\n    }\n  },\n  components: {\n    Ref\n  }\n})\n</script>\n\n<style lang=\"scss\" scoped>\n@use \"sass:math\";\n@import \"../vars\";\n\n.node {\n  background: $node-color;\n  border: 2px solid #4e58bf;\n  border-radius: 10px;\n  cursor: pointer;\n  box-sizing: border-box;\n  width: $node-width;\n  height: auto;\n  padding-bottom: 6px;\n  position: relative;\n  user-select: none;\n  line-height: initial;\n  font-family: Arial;\n\n  &:hover {\n    background: lighten($node-color, 4%);\n  }\n\n  &.selected {\n    background: $node-color-selected;\n    border-color: #e3c000;\n  }\n\n  .title {\n    color: white;\n    font-family: sans-serif;\n    font-size: 18px;\n    padding: 8px;\n  }\n\n  .output {\n    text-align: right;\n  }\n\n  .input {\n    text-align: left;\n  }\n\n  .output-socket {\n    text-align: right;\n    margin-right: -(math.div($socket-size, 2) + $socket-margin);\n    display: inline-block;\n  }\n\n  .input-socket {\n    text-align: left;\n    margin-left: -(math.div($socket-size, 2) + $socket-margin);\n    display: inline-block;\n  }\n\n  .input-title,\n  .output-title {\n    vertical-align: middle;\n    color: white;\n    display: inline-block;\n    font-family: sans-serif;\n    font-size: 14px;\n    margin: $socket-margin;\n    line-height: $socket-size;\n  }\n\n  .input-control {\n    z-index: 1;\n    width: calc(100% - #{$socket-size + 2*$socket-margin});\n    vertical-align: middle;\n    display: inline-block;\n  }\n\n  .control {\n    padding: $socket-margin math.div($socket-size, 2) + $socket-margin;\n  }\n}\n</style>\n","<template lang=\"pug\">\n.socket(\n  :title=\"data.name\"\n)\n</template>\n\n<script>\nexport default {\n  props: ['data']\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@use \"sass:math\";\n@import \"../vars\";\n\n.socket {\n  display: inline-block;\n  cursor: pointer;\n  border: 1px solid white;\n  border-radius: math.div($socket-size, 2);\n  width: $socket-size;\n  height: $socket-size;\n  margin: $socket-margin;\n  vertical-align: middle;\n  background: $socket-color;\n  z-index: 2;\n  box-sizing: border-box;\n  &:hover {\n    border-width: 4px;\n  }\n  &.multiple {\n    border-color: yellow;\n  }\n  &.output {\n    margin-right: - math.div($socket-size, 2);\n  }\n  &.input {\n    margin-left: - math.div($socket-size, 2);\n  }\n}\n</style>\n","import { ClassicPreset, Scope } from 'rete'\nimport { classicConnectionPath, getDOMSocketPosition, loopConnectionPath, SocketPositionWatcher } from 'rete-render-utils'\nimport Vue, { DefineComponent, VueConstructor } from 'vue'\n\nimport { Position } from '../../types'\nimport { RenderPreset } from '../types'\nimport Connection from './components/Connection.vue'\nimport ConnectionWrapper from './components/ConnectionWrapper.vue'\nimport Control from './components/Control.vue'\nimport Node from './components/Node.vue'\nimport Socket from './components/Socket.vue'\nimport { ClassicScheme, ExtractPayload, VueArea2D } from './types'\n\nexport { default as Connection } from './components/Connection.vue'\nexport { default as Control } from './components/Control.vue'\nexport { default as Node } from './components/Node.vue'\nexport { default as Socket } from './components/Socket.vue'\n\ntype Component<Props extends Record<string, any>> =\n  | VueConstructor<Vue<Record<string, any>, Props>>\n  | DefineComponent<Props, any, any, any, any, any, any, any, any, any, any>\n\ntype CustomizationProps<Schemes extends ClassicScheme> = {\n  node?: (data: ExtractPayload<Schemes, 'node'>) => Component<any> | null\n  connection?: (data: ExtractPayload<Schemes, 'connection'>) => Component<any> | null\n  socket?: (data: ExtractPayload<Schemes, 'socket'>) => Component<any> | null\n  control?: (data: ExtractPayload<Schemes, 'control'>) => Component<any> | null\n}\ntype ClassicProps<Schemes extends ClassicScheme, K> = {\n  socketPositionWatcher?: SocketPositionWatcher<Scope<never, [K]>>,\n  customize?: CustomizationProps<Schemes>\n}\n\n/**\n * Classic preset for rendering nodes, connections, controls and sockets.\n */\nexport function setup<Schemes extends ClassicScheme, K extends VueArea2D<Schemes>>(\n  props?: ClassicProps<Schemes, K>\n): RenderPreset<Schemes, K> {\n  const positionWatcher = typeof props?.socketPositionWatcher === 'undefined'\n    ? getDOMSocketPosition<Schemes, K>()\n    : props?.socketPositionWatcher\n  const { node, connection, socket, control } = props?.customize || {}\n\n  return {\n    attach(plugin) {\n      positionWatcher.attach(plugin as unknown as Scope<never, [K]>)\n    },\n    update(context, plugin) {\n      const { payload } = context.data\n      const parent = plugin.parentScope()\n\n      if (!parent) throw new Error('parent')\n      const emit = parent.emit.bind(parent)\n\n      if (context.data.type === 'node') {\n        return { data: payload, emit }\n      } else if (context.data.type === 'connection') {\n        const { start, end } = context.data\n\n        return {\n          data: payload,\n          ...(start ? { start } : {}),\n          ...(end ? { end } : {})\n        }\n      }\n      return { data: payload }\n    },\n    // eslint-disable-next-line max-statements, complexity\n    render(context, plugin) {\n      const parent = plugin.parentScope()\n      const emit = parent.emit.bind(parent)\n\n      if (context.data.type === 'node') {\n        const component = node ? node(context.data) : Node\n\n        return component && {\n          component, props: {\n            data: context.data.payload,\n            emit\n          }\n        }\n      } else if (context.data.type === 'connection') {\n        const component = connection ? connection(context.data) : Connection\n        const { payload } = context.data\n        const { source, target, sourceOutput, targetInput } = payload\n\n        return component && {\n          component: ConnectionWrapper, props: {\n            data: context.data.payload,\n            component,\n            start: context.data.start || ((change: any) => positionWatcher.listen(source, 'output', sourceOutput, change)),\n            end: context.data.end || ((change: any) => positionWatcher.listen(target, 'input', targetInput, change)),\n            path: async (start: Position, end: Position) => {\n              const response = await plugin.emit({ type: 'connectionpath', data: { payload, points: [start, end] } })\n\n              if (!response) return ''\n\n              const { path, points } = response.data\n              const curvature = 0.3\n\n              if (!path && points.length !== 2) throw new Error('cannot render connection with a custom number of points')\n              if (!path) return payload.isLoop\n                ? loopConnectionPath(points as [Position, Position], curvature, 120)\n                : classicConnectionPath(points as [Position, Position], curvature)\n\n              return path\n            }\n          }\n        }\n      } else if (context.data.type === 'socket') {\n        const { payload } = context.data\n        const component = socket ? socket(context.data) : Socket\n\n        return {\n          component, props: {\n            data: payload\n          }\n        }\n      } else if (context.data.type === 'control') {\n        const { payload } = context.data\n\n        if (control) {\n          const component = control(context.data)\n\n          return component && {\n            component, props: {\n              data: payload\n            }\n          }\n        }\n\n        return context.data.payload instanceof ClassicPreset.InputControl\n          ? {\n            component: Control, props: {\n              data: payload\n            }\n          }\n          : null\n      }\n    }\n  }\n}\n","<template lang=\"pug\">\n//- v-model cannot be used here due to compatibility with Vue 2 and 3\ninput.search(\n  :value=\"text\"\n  @input=\"$emit('change', $event.target.value)\"\n  data-testid=\"context-menu-search-input\"\n)\n</template>\n\n<script>\nimport { defineComponent } from 'vue'\n\nexport default defineComponent({\n  props: ['text']\n})\n\n</script>\n\n<style lang=\"scss\" scoped>\n.search {\n  color: white;\n  padding: 1px 8px;\n  border: 1px solid white;\n  border-radius: 10px;\n  font-size: 16px;\n  font-family: serif;\n  width: 100%;\n  box-sizing: border-box;\n  background: transparent;\n}\n</style>\n","export function debounce(delay: number, cb: () => void) {\n  return {\n    timeout: null as null | number,\n    cancel() {\n      if (this.timeout) {\n        window.clearTimeout(this.timeout)\n        this.timeout = null\n      }\n    },\n    call() {\n      this.timeout = window.setTimeout(() => {\n        cb()\n      }, delay)\n    }\n  }\n}\n","<template lang=\"pug\">\nBlock.block(\n  :class=\"{ hasSubitems: subitems }\"\n  data-testid=\"context-menu-item\"\n)\n  .content(\n    @click.stop=\"$emit('select', $event); $emit('hide')\"\n    @wheel.stop=\"\"\n    @pointerover=\"hide.cancel(); visibleSubitems = true\"\n    @pointerleave=\"hide.call()\"\n    @pointerdown.stop=\"\"\n  )\n    slot\n    .subitems(v-if=\"subitems && visibleSubitems\")\n      Item(\n        v-for=\"item of subitems\"\n        :key=\"item.key\"\n        @select=\"item.handler($event)\"\n        :delay=\"delay\"\n        @hide=\"$emit('hide')\"\n        :subitems=\"item.subitems\"\n      ) {{ item.label }}\n</template>\n\n<script>\nimport Block from './Block.vue'\nimport { debounce } from '../utils/debounce'\n\nexport default {\n  name: 'Item',\n  props: ['subitems', 'delay'],\n  data() {\n    return {\n      visibleSubitems: false,\n      hide: debounce(this.delay, this.hideSubitems)\n    }\n  },\n  methods: {\n    hideSubitems() {\n      this.visibleSubitems = false\n    }\n  },\n  components: {\n    Block\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"../context-vars\";\n\n.block {\n  padding: 0;\n}\n\n.content {\n  padding: 4px;\n}\n\n.hasSubitems {\n  &:after {\n    content: '►';\n    position: absolute;\n    opacity: 0.6;\n    right: 5px;\n    top: 5px;\n  }\n}\n\n.subitems {\n  position: absolute;\n  top: 0;\n  left: 100%;\n  width: $width;\n}\n</style>\n","<template lang=\"pug\">\n.menu(\n  @mouseover=\"hide.cancel()\"\n  @mouseleave=\"hide.call()\"\n  data-testid=\"context-menu\"\n  rete-context-menu\n)\n  Block(v-if=\"searchBar\")\n    Search(:text=\"filter\" @change=\"filter = $event\")\n  Item(\n    v-for=\"item of getItems()\"\n    :key=\"item.key\"\n    @select=\"item.handler($event)\"\n    :delay=\"delay\"\n    @hide=\"onHide()\"\n    :subitems=\"item.subitems\"\n  )\n    | {{ item.label }}\n</template>\n\n<script>\nimport { defineComponent } from 'vue'\nimport Block from './Block.vue'\nimport Search from './Search.vue'\nimport Item from './Item.vue'\nimport { debounce } from '../utils/debounce'\n\nexport default defineComponent({\n  props: ['items', 'delay', 'searchBar', 'onHide', 'seed'],\n  data() {\n    return {\n      filter: '',\n      hide: debounce(this.delay, this.onHide)\n    }\n  },\n  methods: {\n    getItems() {\n      const filterRegexp = new RegExp(this.filter, 'i')\n      const filteredList = this.items.filter(item => (\n        item.label.match(filterRegexp)\n      ))\n\n      return filteredList\n    }\n  },\n  unmounted() {\n    if (this.hide) this.hide.cancel()\n  },\n  components: {\n    Block,\n    Search,\n    Item\n  }\n})\n</script>\n\n<style lang=\"scss\" scoped>\n@use \"sass:math\";\n@import \"../context-vars\";\n\n.menu {\n  padding: 10px;\n  width: $width;\n  margin-top: -20px;\n  margin-left: - math.div($width, 2);\n}\n</style>\n","import { BaseSchemes } from 'rete'\n\nimport { RenderPreset } from '../types'\nimport Menu from './components/Menu.vue'\nimport { ContextMenuRender } from './types'\n\n/**\n * Preset for rendering context menu.\n */\nexport function setup<Schemes extends BaseSchemes, K extends ContextMenuRender>(props?: { delay?: number }): RenderPreset<Schemes, K> {\n  const delay = typeof props?.delay === 'undefined' ? 1000 : props.delay\n\n  return {\n    update(context) {\n      if (context.data.type === 'contextmenu') {\n        return {\n          items: context.data.items,\n          delay,\n          searchBar: context.data.searchBar,\n          onHide: context.data.onHide\n        }\n      }\n    },\n    render(context) {\n      if (context.data.type === 'contextmenu') {\n        return {\n          component: Menu,\n          props: {\n            items: context.data.items,\n            delay,\n            searchBar: context.data.searchBar,\n            onHide: context.data.onHide\n          }\n        }\n      }\n    }\n  }\n}\n","export function px(value: number) {\n  return `${value}px`\n}\n","<template lang=\"pug\">\n.mini-node(:style=\"styles\" data-testid=\"minimap-node\")\n</template>\n\n<script>\nimport { px } from './utils'\n\nexport default {\n  props: ['left', 'top', 'width', 'height'],\n  computed: {\n    styles() {\n      return {\n        left: px(this.left),\n        top: px(this.top),\n        width: px(this.width),\n        height: px(this.height)\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.mini-node {\n  position: absolute;\n  background: rgba(110, 136, 255, 0.8);\n  border: 1px solid rgb(192 206 212 / 60%);\n}\n</style>\n","import { Position } from '../types'\n\ntype Translate = (dx: number, dy: number) => void\ntype StartEvent = { pageX: number, pageY: number }\n\nexport function useDrag(translate: Translate, getPointer: (e: StartEvent) => Position) {\n  return {\n    start(e: StartEvent) {\n      let previous = { ...getPointer(e) }\n\n      function move(moveEvent: MouseEvent) {\n        const current = { ...getPointer(moveEvent) }\n        const dx = current.x - previous.x\n        const dy = current.y - previous.y\n\n        previous = current\n\n        translate(dx, dy)\n      }\n      function up() {\n        window.removeEventListener('pointermove', move)\n        window.removeEventListener('pointerup', up)\n        window.removeEventListener('pointercancel', up)\n      }\n\n      window.addEventListener('pointermove', move)\n      window.addEventListener('pointerup', up)\n      window.addEventListener('pointercancel', up)\n    }\n  }\n}\n","<template lang=\"pug\">\n.mini-viewport(\n  @pointerdown.stop=\"drag.start($event)\"\n  :style=\"styles\"\n  data-testid=\"minimap-viewport\"\n)\n</template>\n\n<script>\nimport { px } from './utils'\nimport { useDrag } from '../../shared/drag'\n\nexport default {\n  props: ['left', 'top', 'width', 'height', 'containerWidth', 'translate'],\n  data() {\n    return {\n      drag: useDrag(this.onDrag, e => ({ x: e.pageX, y: e.pageY }))\n    }\n  },\n  methods: {\n    scale(v) {\n      return v * this.containerWidth\n    },\n    invert(v) {\n      return v / this.containerWidth\n    },\n    onDrag(dx, dy) {\n      this.translate(this.invert(-dx), this.invert(-dy))\n    }\n  },\n  computed: {\n    styles() {\n\n      return {\n        left: px(this.scale(this.left)),\n        top: px(this.scale(this.top)),\n        width: px(this.scale(this.width)),\n        height: px(this.scale(this.height))\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.mini-viewport {\n  position: absolute;\n  background: rgba(255, 251, 128, 0.32);\n  border: 1px solid #ffe52b;\n}\n</style>\n","<template lang=\"pug\">\n.minimap(\n  ref=\"container\"\n  :style=\"{ width: px(size * ratio), height: px(size) }\"\n  @pointerdown.stop.prevent=\"\"\n  @dblclick.stop.prevent=\"dblclick($event)\"\n  data-testid=\"minimap\"\n)\n  MiniNode(\n    v-for=\"(node, index) of nodes\"\n    :key=\"[index, node.left].join('_')\"\n    :left=\"scale(node.left)\"\n    :top=\"scale(node.top)\"\n    :width=\"scale(node.width)\"\n    :height=\"scale(node.height)\"\n  )\n  MiniViewport(\n    :left=\"viewport.left\"\n    :top=\"viewport.top\"\n    :width=\"viewport.width\"\n    :height=\"viewport.height\"\n    :containerWidth=\"$refs.container && $refs.container.clientWidth\"\n    :translate=\"translate\"\n  )\n</template>\n\n<script>\nimport MiniNode from './MiniNode.vue'\nimport MiniViewport from './MiniViewport.vue'\nimport { px } from './utils'\n\nexport default {\n  props: {\n    size: Number,\n    ratio: Number,\n    nodes: Array,\n    viewport: Object,\n    translate: Function,\n    point: Function,\n    seed: Number\n  },\n  methods: {\n    dblclick(e) {\n      if (!this.$refs.container) return\n      const box = this.$refs.container.getBoundingClientRect()\n      const x = (e.clientX - box.left) / (this.size * this.ratio)\n      const y = (e.clientY - box.top) / (this.size * this.ratio)\n\n      this.point(x, y)\n    },\n    px,\n    scale(value) {\n      if (!this.$refs.container) return 0\n\n      return value * this.$refs.container.clientWidth\n    }\n  },\n  components: {\n    MiniNode,\n    MiniViewport\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.minimap {\n  position: absolute;\n  right: 24px;\n  bottom: 24px;\n  background: rgba(229, 234, 239, 0.65);\n  padding: 20px;\n  overflow: hidden;\n  border: 1px solid #b1b7ff;\n  border-radius: 8px;\n  box-sizing: border-box;\n}\n</style>\n","import { BaseSchemes } from 'rete'\n\nimport { RenderPreset } from '../types'\nimport Minimap from './Minimap.vue'\nimport { MinimapRender } from './types'\n\n/**\n * Preset for rendering minimap.\n */\nexport function setup<Schemes extends BaseSchemes, K extends MinimapRender>(props?: { size?: number }): RenderPreset<Schemes, K> {\n  return {\n    update(context) {\n      if (context.data.type === 'minimap') {\n        return {\n          nodes: context.data.nodes,\n          size: props?.size || 200,\n          ratio: context.data.ratio,\n          viewport: context.data.viewport,\n          translate: context.data.translate,\n          point: context.data.point\n        }\n      }\n    },\n    render(context) {\n      if (context.data.type === 'minimap') {\n        return {\n          component: Minimap,\n          props: {\n            nodes: context.data.nodes,\n            size: props?.size || 200,\n            ratio: context.data.ratio,\n            viewport: context.data.viewport,\n            translate: context.data.translate,\n            point: context.data.point\n          }\n        }\n      }\n    }\n  }\n}\n","<template lang=\"pug\">\n.pin(\n  @pointerdown.stop.prevent=\"drag.start($event); $emit('down')\"\n  @contextmenu.stop.prevent=\"$emit('menu')\"\n  :class=\"{ selected }\"\n  :style=\"style\"\n  data-testid=\"pin\"\n)\n</template>\n\n<script>\nimport { useDrag } from '../../shared/drag'\nconst pinSize = 20\n\nexport default {\n  props: ['position', 'selected', 'getPointer'],\n  data() {\n    return {\n      drag: useDrag(this.onDrag, this.getPointer)\n    }\n  },\n  computed: {\n    style() {\n      const { x, y } = this.position\n\n      return {\n        position: 'absolute',\n        top: `${y - pinSize / 2}px`,\n        left: `${x - pinSize / 2}px`\n      }\n    }\n  },\n  methods: {\n    onDrag(dx, dy) {\n      this.$emit('translate', { dx, dy })\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n$size: 20px;\n\n.pin {\n  width: $size;\n  height: $size;\n  box-sizing: border-box;\n  background: steelblue;\n  border: 2px solid white;\n  border-radius: $size;\n\n  &.selected {\n    background: #ffd92c;\n  }\n}\n</style>\n","<template lang=\"pug\">\n.pins\n  Pin(\n    v-for=\"pin of pins\"\n    :key=\"pin.id\"\n    :position=\"pin.position\"\n    :selected=\"pin.selected\"\n    :getPointer=\"getPointer\"\n    @menu=\"menu(pin.id)\"\n    @translate=\"translate(pin.id, $event.dx, $event.dy)\"\n    @down=\"down(pin.id)\"\n  )\n</template>\n\n<script>\nimport Pin from './Pin.vue'\n\nexport default {\n  props: ['pins', 'menu', 'translate', 'down', 'seed', 'getPointer'],\n  components: {\n    Pin\n  }\n}\n</script>\n","import { BaseSchemes } from 'rete'\nimport { BaseAreaPlugin } from 'rete-area-plugin'\n\nimport { RenderPreset } from '../types'\nimport Pins from './Pins.vue'\nimport { PinsRender } from './types'\n\ntype Props = {\n  translate?: (id: string, dx: number, dy: number) => void\n  contextMenu?: (id: string) => void\n  pointerdown?: (id: string) => void\n}\n\n/**\n * Preset for rendering pins.\n */\nexport function setup<Schemes extends BaseSchemes, K extends PinsRender>(props?: Props): RenderPreset<Schemes, K> {\n  const getProps = () => ({\n    menu: props?.contextMenu || (() => null),\n    translate: props?.translate || (() => null),\n    down: props?.pointerdown || (() => null)\n  })\n\n  return {\n    update(context) {\n      if (context.data.type === 'reroute-pins') {\n        return {\n          ...getProps(),\n          pins: context.data.data.pins\n        }\n      }\n    },\n    render(context, plugin) {\n      if (context.data.type === 'reroute-pins') {\n        const area = plugin.parentScope<BaseAreaPlugin<Schemes, PinsRender>>(BaseAreaPlugin)\n\n        return {\n          component: Pins,\n          props: {\n            ...getProps(),\n            getPointer: () => area.area.pointer,\n            pins: context.data.data.pins\n          }\n        }\n      }\n    }\n  }\n}\n","/**\n * Built-in presets, responsible for rendering different parts of the editor.\n * @module\n */\nexport * as classic from './classic'\nexport * as contextMenu from './context-menu'\nexport * as minimap from './minimap'\nexport * as reroute from './reroute'\n\n","import { BaseSchemes, CanAssignSignal, Scope } from 'rete'\n\nimport { RenderPreset } from './presets/types'\nimport { getRenderer, Renderer } from './renderer'\nimport { Position, RenderSignal } from './types'\n\nexport * as Presets from './presets'\nexport type { ClassicScheme, VueArea2D } from './presets/classic/types'\nexport type { RenderPreset } from './presets/types'\nexport { default as Ref } from './Ref.vue'\n\n/**\n * Signals that can be emitted by the plugin\n * @priority 10\n */\nexport type Produces<Schemes extends BaseSchemes> =\n  | { type: 'connectionpath', data: { payload: Schemes['Connection'], path?: string, points: Position[] } }\n\ntype Requires<Schemes extends BaseSchemes> =\n  | RenderSignal<'node', { payload: Schemes['Node'] }>\n  | RenderSignal<'connection', { payload: Schemes['Connection'], start?: Position, end?: Position }>\n  | { type: 'unmount', data: { element: HTMLElement } }\n\n/**\n * Vue plugin. Renders nodes, connections and other elements using React.\n * @priority 9\n * @emits connectionpath\n * @listens render\n * @listens unmount\n */\nexport class VuePlugin<Schemes extends BaseSchemes, T = Requires<Schemes>> extends Scope<Produces<Schemes>, [Requires<Schemes> | T]> {\n  renderer: Renderer<unknown>\n  presets: RenderPreset<Schemes, T>[] = []\n  owners = new WeakMap<HTMLElement, RenderPreset<Schemes, T>>()\n\n  constructor() {\n    super('vue-render')\n    this.renderer = getRenderer()\n\n    this.addPipe(context => {\n      if (!context || typeof context !== 'object' || !('type' in context)) return context\n\n      if (context.type === 'unmount') {\n        this.unmount(context.data.element)\n      } else if (context.type === 'render') {\n        if ('filled' in context.data && context.data.filled) {\n          return context\n        }\n        if (this.mount(context.data.element, context as T)) {\n          return {\n            ...context,\n            data: {\n              ...context.data,\n              filled: true\n            }\n          } as typeof context\n        }\n      }\n\n      return context\n    })\n  }\n\n  setParent(scope: Scope<Requires<Schemes> | T>): void {\n    super.setParent(scope)\n\n    this.presets.forEach(preset => {\n      if (preset.attach) preset.attach(this)\n    })\n  }\n\n  private unmount(element: HTMLElement) {\n    this.owners.delete(element)\n    this.renderer.unmount(element)\n  }\n\n  private mount(element: HTMLElement, context: T) {\n    const existing = this.renderer.get(element)\n    const parent = this.parentScope()\n\n    if (existing) {\n      this.presets.forEach(preset => {\n        if (this.owners.get(element) !== preset) return\n        const result = preset.update(context as Extract<T, { type: 'render' }>, this)\n\n        if (result) {\n          this.renderer.update(existing, result)\n        }\n      })\n      return true\n    }\n\n    for (const preset of this.presets) {\n      const result = preset.render(context as Extract<T, { type: 'render' }>, this)\n\n      if (!result) continue\n\n      this.renderer.mount(\n        element,\n        result.component,\n        result.props,\n        () => parent?.emit({ type: 'rendered', data: (context as Requires<Schemes>).data } as T)\n      )\n\n      this.owners.set(element, preset)\n      return true\n    }\n  }\n\n  /**\n   * Adds a preset to the plugin.\n   * @param preset Preset that can render nodes, connections and other elements.\n   */\n  public addPreset<K>(preset: RenderPreset<Schemes, CanAssignSignal<T, K> extends true ? K : 'Cannot apply preset. Provided signals are not compatible'>) {\n    const local = preset as RenderPreset<Schemes, T>\n\n    if (local.attach) local.attach(this)\n    this.presets.push(local)\n  }\n}\n"],"names":["create","element","component","payload","onRendered","app","Vue","props","render","h","_objectSpread","seed","Math","random","ref","mounted","updated","container","document","createElement","appendChild","$mount","update","$refs","child","$forceUpdate","destroy","$destroy","$el","remove","getRenderer","instances","Map","get","mount","vueComponent","set","unmount","_sfc_main","defineComponent","setup","positionWatcher","socketPositionWatcher","getDOMSocketPosition","_ref","customize","node","connection","socket","control","attach","plugin","context","data","parent","parentScope","Error","emit","bind","type","_context$data","start","end","Node","Connection","source","target","sourceOutput","targetInput","ConnectionWrapper","change","listen","path","_path","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","_response$data","points","curvature","wrap","_callee$","_context","prev","next","sent","abrupt","length","isLoop","loopConnectionPath","classicConnectionPath","stop","_x","_x2","apply","arguments","Socket","ClassicPreset","InputControl","Control","debounce","delay","cb","timeout","cancel","window","clearTimeout","call","setTimeout","items","searchBar","onHide","Menu","px","value","concat","useDrag","translate","getPointer","e","previous","move","moveEvent","current","dx","x","dy","y","up","removeEventListener","addEventListener","nodes","size","ratio","viewport","point","Minimap","getProps","menu","contextMenu","down","pointerdown","pins","area","BaseAreaPlugin","Pins","pointer","VuePlugin","_Scope","_inherits","_super","_createSuper","_this","_classCallCheck","_defineProperty","_assertThisInitialized","WeakMap","renderer","addPipe","_typeof","filled","_createClass","key","setParent","scope","_this2","_get","_getPrototypeOf","prototype","presets","forEach","preset","owners","_this3","existing","result","_iterator","_createForOfIteratorHelper","_step","s","n","done","err","f","addPreset","local","push","Scope"],"mappings":"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"}